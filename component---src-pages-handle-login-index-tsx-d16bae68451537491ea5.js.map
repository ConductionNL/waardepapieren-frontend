{"version":3,"file":"component---src-pages-handle-login-index-tsx-d16bae68451537491ea5.js","mappings":"iJAgEA,UA1DiB,WACf,MAA8BA,EAAAA,SAAe,MAAtCC,EAAP,KAAgBC,EAAhB,KACAF,EAAAA,WAAgB,WACQ,oBAAXG,SACO,OAAZF,EACFC,EAAW,CACTE,MAAOD,OAAOE,cACdC,cAAeH,OAAOI,sBAGxBC,OAGH,CAACP,IAEJ,IAAMO,EAAc,WAClBC,MAAMR,EAAQG,MAAO,CACnBM,YAAa,UACbC,QAAS,CAAE,eAAgB,sBAE1BC,MAAK,SAAUC,GACd,OAAOA,EAASC,UAEjBF,MAAK,SAAUG,IACdC,EAAAA,EAAAA,IAAQD,GAEsB,SAA1Bd,EAAQK,eACVW,EAAAA,EAAAA,IAAS,IAAMhB,EAAQK,gBAEvBW,EAAAA,EAAAA,IAAS,SAKjB,OACE,gBAAC,IAAD,KACE,4BACE,uBAAKC,UAAU,mBACb,uBAAKA,UAAU,UACb,sBAAIA,UAAU,qBAAd,qBAEF,uBAAKA,UAAU,UACb,sBAAIA,UAAU,qBAAd,8BAEF,uBAAKA,UAAU,eACb,uBACEA,UAAU,mDACVC,KAAK,UAEL,wBAAMD,UAAU,mBAAhB","sources":["webpack://pwa/./src/pages/handleLogin/index.tsx"],"sourcesContent":["import * as React from \"react\";\nimport Layout from \"../../components/common/layout\";\nimport { useEffect } from \"react\";\nimport { navigate } from \"gatsby-link\";\nimport { setUser } from \"../../services/auth\";\n\nconst Redirect = () => {\n  const [context, setContext] = React.useState(null);\n  React.useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      if (context === null) {\n        setContext({\n          meUrl: window.GATSBY_ME_URL,\n          loginRedirect: window.GATSBY_REDIRECT_URL,\n        });\n      } else {\n        handleLogin();\n      }\n    }\n  }, [context]);\n\n  const handleLogin = () => {\n    fetch(context.meUrl, {\n      credentials: \"include\",\n      headers: { \"Content-Type\": \"application/json\" },\n    })\n      .then(function (response) {\n        return response.json();\n      })\n      .then(function (data) {\n        setUser(data);\n\n        if (context.loginRedirect !== \"null\") {\n          navigate(\"/\" + context.loginRedirect);\n        } else {\n          navigate(\"/\");\n        }\n      });\n  };\n\n  return (\n    <Layout>\n      <main>\n        <div className=\"row text-center\">\n          <div className=\"col-12\">\n            <h1 className=\"utrecht-heading-1\">Aan het inloggen</h1>\n          </div>\n          <div className=\"col-12\">\n            <h4 className=\"utrecht-heading-4\">even geduld alstublieft..</h4>\n          </div>\n          <div className=\"col-12 mt-5\">\n            <div\n              className=\"spinner-border text-primary redirect-loader-size\"\n              role=\"status\"\n            >\n              <span className=\"visually-hidden\">Loading...</span>\n            </div>\n          </div>\n        </div>\n      </main>\n    </Layout>\n  );\n};\n\nexport default Redirect;\n"],"names":["React","context","setContext","window","meUrl","GATSBY_ME_URL","loginRedirect","GATSBY_REDIRECT_URL","handleLogin","fetch","credentials","headers","then","response","json","data","setUser","navigate","className","role"],"sourceRoot":""}